# 灵犀文档校对平台 - AI模型管理功能

## 最新功能更新

本次重大更新为灵犀文档校对平台增加了**完整的AI模型管理功能**，支持最新的AI模型以及自定义模型管理，让用户能够灵活配置和使用各种AI服务商的最新模型。

## 主要功能特性

### 1. 支持最新AI模型（2025年1月更新）

#### OpenAI
- **GPT-4o**: 最新的多模态模型，强推理能力
- **GPT-4 Turbo**: 速度更快的GPT-4，超大上下文
- **o3-mini**: o3系列轻量版，高效推理
- **o3**: o3系列完整版，顶级推理能力
- **GPT-4**: 经典强大模型，适合复杂任务
- **GPT-3.5 Turbo**: 经济实用的模型

#### DeepSeek
- **DeepSeek-R1**: 最新推理增强模型，强化学习优化
- **DeepSeek-R1-Zero**: R1零样本版本，无需训练数据
- **DeepSeek-V3**: V3系列模型，中文优化，大上下文
- **DeepSeek Chat**: 通用对话模型，中文友好
- **DeepSeek Coder**: 代码专用模型，编程任务优化
- **DeepSeek R1 Lite**: R1轻量预览版

#### Google Gemini
- **Gemini 2.5 Pro**: 最新2.5版本，多语言支持，集成搜索
- **Gemini 1.5 Pro**: 高性能模型，强大推理能力
- **Gemini 1.5 Flash**: 快速响应模型，平衡性能与速度
- **PaLM 2**: 多语言大模型，集成Bard功能
- **Gemini 1.0 Pro**: 稳定版本模型

#### Qwen (阿里云通义千问)
- **Qwen3-235B**: 最新Qwen3系列，2350亿参数超大模型
- **Qwen2.5-72B**: Qwen2.5系列，720亿参数，中文及多语言支持
- **Qwen Max**: 最强模型，顶级性能
- **Qwen Plus**: 增强模型，高质量输出
- **Qwen Turbo**: 快速模型，高效响应
- **Qwen2.5 72B Instruct**: 指令优化版本

#### 智谱AI
- **GLM-4-Flash**: 闪电版GLM-4，快速响应，中文优化
- **GLM-4-Long**: 长文本版GLM-4，支持超长上下文
- **PanGu-Dialog**: 盘古对话模型，中文多轮对话专用
- **GLM-4**: 通用语言模型，中文优化
- **GLM-4V**: 多模态模型，支持图文理解
- **GLM-3 Turbo**: 快速模型，经济实用

### 2. 自定义模型管理

#### 动态添加自定义模型
- **模型ID设置**: 自定义API调用时使用的模型标识符
- **显示名称**: 设置界面友好的显示名称
- **模型描述**: 详细描述模型特点和适用场景
- **提供商关联**: 将自定义模型关联到特定的AI服务提供商

#### 模型信息编辑
- **在线编辑**: 可随时修改模型的显示名称和描述
- **实时更新**: 修改后立即在界面中生效
- **版本管理**: 支持模型信息的持续更新和维护

#### 模型列表管理
- **分类显示**: 按提供商分类显示所有可用模型
- **筛选功能**: 支持按提供商筛选模型列表
- **详细信息**: 显示模型ID、名称、描述等完整信息

### 3. 增强的配置管理

#### API密钥与模型配置
- **独立模型选择**: 为每个API密钥单独选择启用的模型
- **灵活配置**: 可选择部分模型或启用全部模型
- **后续调整**: 支持随时修改API密钥的模型配置

#### 标签页界面
- **API密钥管理**: 专门的标签页管理API密钥配置
- **自定义模型**: 独立的标签页管理自定义模型
- **直观操作**: 分类清晰，操作简便

### 4. API接口扩展

#### 新增API端点
- `POST /api/models/add`: 添加自定义模型
- `POST /api/models/update`: 更新模型信息
- `GET /api/models/<provider>`: 获取指定提供商的模型列表
- `GET /api/user/models`: 获取用户可用的所有模型

#### 增强的校对接口
- 支持指定具体的AI提供商和模型
- 记录使用的提供商和模型信息
- 完整的历史记录追踪

### 5. 技术架构优化

#### 配置系统增强
- **动态模型管理**: 支持运行时添加和修改模型
- **模型信息查询**: 提供模型详细信息的查询方法
- **配置验证**: 完善的模型配置验证机制

#### 数据存储优化
- **JSON格式存储**: 使用JSON格式存储启用的模型列表
- **向后兼容**: 完全兼容现有的API密钥配置
- **数据完整性**: 确保配置数据的一致性和完整性

## 使用指南

### 1. 添加和配置API密钥

1. 访问"设置"页面的"API密钥管理"标签
2. 选择AI服务提供商
3. 输入API密钥
4. 选择要启用的模型（可选，不选择则启用所有模型）
5. 保存配置

### 2. 管理自定义模型

#### 添加自定义模型
1. 切换到"自定义模型"标签页
2. 选择目标提供商
3. 输入模型ID（API调用标识符）
4. 设置显示名称
5. 填写模型描述
6. 点击"添加模型"

#### 编辑现有模型
1. 在"当前模型列表"中找到要编辑的模型
2. 点击模型右侧的编辑按钮
3. 在弹出的对话框中修改信息
4. 保存修改

### 3. 使用模型进行校对

1. 在主页的"选择AI模型"下拉菜单中选择具体模型
2. 模型显示格式："{提供商名称} - {模型名称}"
3. 输入待校对的文本
4. 点击"开始校对"
5. 查看校对结果和问题分析

### 4. 模型配置调整

1. 在"已配置的API密钥"部分找到对应的服务商
2. 点击"模型配置"按钮
3. 在弹出的对话框中选择或取消选择模型
4. 保存配置

## 新增配置示例

### 自定义模型配置示例
```json
{
  "openai": {
    "models": [
      {
        "id": "gpt-4o-custom",
        "name": "GPT-4o 自定义版",
        "description": "针对特定业务优化的GPT-4o模型"
      }
    ]
  }
}
```

### API调用示例
```javascript
// 添加自定义模型
fetch('/api/models/add', {
  method: 'POST',
  headers: { 'Content-Type': 'application/json' },
  body: JSON.stringify({
    provider: 'openai',
    model_id: 'gpt-4o-custom',
    model_name: 'GPT-4o 自定义版',
    description: '针对特定业务优化的GPT-4o模型'
  })
})

// 更新模型信息
fetch('/api/models/update', {
  method: 'POST',
  headers: { 'Content-Type': 'application/json' },
  body: JSON.stringify({
    provider: 'openai',
    model_id: 'gpt-4o-custom',
    model_name: 'GPT-4o 企业版',
    description: '企业级优化的GPT-4o模型'
  })
})
```

## 安全性和兼容性

- **完全向后兼容**: 现有的API密钥配置无需任何修改
- **数据安全**: 所有配置信息安全存储，API密钥加密保护
- **错误处理**: 完善的错误处理和用户反馈机制
- **性能优化**: 高效的模型查询和配置管理

## 开发者信息

### 核心文件更新
- `lingxi/config.py`: 更新AI模型配置，添加动态管理方法
- `lingxi/app.py`: 新增自定义模型管理API端点
- `lingxi/templates/settings.html`: 增加自定义模型管理界面
- `lingxi/models.py`: 模型管理相关方法保持不变

### 新增功能接口
- 动态模型添加和更新
- 模型信息查询和验证
- 用户界面增强
- API接口扩展

所有修改遵循现有的代码规范和架构设计，确保系统的可维护性和扩展性。新功能完全向后兼容，不影响现有用户的使用体验。 