灵犀校对平台 - 产品需求文档 (PRD)
| 文档信息 | |
| :--- | :--- |
| 产品名称 | 灵犀校对平台 (Lingxi Proofreading Platform) |
| 版本 | V1.0 |
| 最后更新 | 2025年6月10日 |
| 产品负责人 | (你的名字) |
| 文档状态 | 规划中 |

1. 产品概述 (Product Overview)
1.1 产品愿景
构建一个强大、灵活且可扩展的在线文本校对平台。用户不再局限于单一的AI服务，而是可以通过管理自己的API密钥，自由选择并利用包括OpenAI、Gemini、国产大模型乃至自托管模型在内的多种AI引擎，获得完全自定义和专业级的文本优化体验。

1.2 目标用户
高级用户/开发者: 希望利用自己熟悉的或特定的AI模型进行文本处理。
内容团队/初创公司: 需要一个统一的平台来使用不同来源的AI服务，并控制成本。
对AI技术感兴趣的学生/研究者: 希望在一个平台上方便地对比不同大模型的文本处理能力。
**1.3 待解决的核心问题
选择锁定: 主流校对服务通常绑定单一AI模型，用户无法选择。
成本与隐私: 用户无法利用自己已有的API额度或出于隐私考虑使用本地部署的模型。
缺乏灵活性: 无法满足对特定模型（如国产模型、特定领域微调模型）的使用需求。
2. 功能需求 (Functional Requirements) - V1.0
功能模块 (Epic)	功能点 (Story)	优先级	详细描述与验收标准 (AC)
用户账户	F1: 用户认证	P0 (核心)	描述: 提供基础的用户注册、登录、登出功能。&lt;br>AC:&lt;br>1. 用户可以通过用户名和密码进行注册。&lt;br>2. 已注册用户可以登录系统。&lt;br>3. 登录后的用户可以登出。&lt;br>4. 密码在数据库中必须经过哈希处理。
API密钥管理	F2.1: 添加密钥	P0 (核心)	描述: 用户可以为不同的AI模型提供商添加自己的API密钥。&lt;br>AC:&lt;br>1. 在专门的设置页面操作。&lt;br>2. 提供一个下拉菜单选择模型提供商（OpenAI, Gemini, DeepSeek, Qwen, 智谱, Custom-OpenAI）。&lt;br>3. 用户输入对应的API Key。&lt;br>4. 如果选择Custom-OpenAI，额外要求用户输入Base URL。&lt;br>5. 密钥在存入数据库前必须加密。
F2.2: 查看与删除	P0 (核心)	描述: 用户可以管理已添加的密钥。&lt;br>AC:&lt;br>1. 在设置页列出用户已添加的所有密钥类型。&lt;br>2. 为安全起见，不显示完整密钥，只显示提供商名称和添加状态（如 "OpenAI: ✅已配置"）。&lt;br>3. 用户可以删除任何一个已添加的密钥。
核心校对功能	F3.1: 模型选择	P0 (核心)	描述: 用户在校对前，可以选择使用哪个已配置的模型。&lt;br>AC:&lt;br>1. 在主校对界面的文本框旁，有一个下拉菜单。&lt;br>2. 该菜单动态加载用户在设置中所有已成功配置的模型列表。&lt;br>3. 用户必须选择一个模型才能执行校对。
F3.2: 执行校对	P0 (核心)	描述: 接收文本，使用用户选定的模型进行校对。&lt;br>AC:&lt;br>1. 用户输入文本，选择模型，点击“开始校对”按钮。&lt;br>2. 前端异步调用后端API (/api/proofread)。&lt;br>3. 后端根据用户选择，动态加载对应的模型处理器和API密钥，执行校对。&lt;br>4. 具备清晰的加载状态提示和友好的错误处理机制。
F3.3: 结果展示	P0 (核心)	描述: 结构化地展示校对结果。&lt;br>AC:&lt;br>1. 结果分为【问题列表】和【优化后全文】两个板块。&lt;br>2. 格式清晰，易于阅读和复制。
历史记录	F4: 校对历史	P1 (可选)	描述: 系统自动为登录用户保存校对历史。&lt;br>AC:&lt;br>1. 每次成功的校对都会被记录，包含原文、修正文、所用模型和时间。&lt;br>2. 用户可以在一个单独的页面查看自己的历史记录列表。


3. 非功能性需求 (Non-Functional Requirements)
安全性 (Security):
用户密码必须哈希存储 (e.g., using werkzeug.security)。
用户API密钥必须在数据库中加密存储 (e.g., using cryptography library)。
绝不将任何敏感信息（密钥、密码）硬编码在代码中，应使用环境变量管理。
可扩展性 (Extensibility):
AI服务层必须采用策略模式或类似设计，确保未来新增一个AI模型提供商时，只需添加一个新的处理类，无需大规模改动现有代码。
性能 (Performance): 对于500字文本，端到端（用户点击到结果显示）响应时间在10秒内。
4. 技术栈 (Technology Stack)
类别	技术	备注
后端框架	Flask	
数据库ORM	SQLAlchemy	
数据库	SQLite (开发), PostgreSQL (生产)	
数据库迁移	Flask-Migrate	管理数据库结构变更
前端	HTML5, CSS3, Vanilla JavaScript	使用fetch进行异步API调用
部署	Docker, Gunicorn / Nginx	推荐容器化部署方案